<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Brayden's Rants and Recipes (Posts about asciidoctor)</title><link>https://bstreete.github.io/</link><description></description><atom:link href="https://bstreete.github.io/categories/asciidoctor.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2025 &lt;a href="mailto:bstreete@users.noreply.github.com"&gt;Brayden Streeter&lt;/a&gt; </copyright><lastBuildDate>Sun, 21 Dec 2025 15:15:51 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Installing Nikola on Windows</title><link>https://bstreete.github.io/posts/tech/installing-nikola-on-windows/</link><dc:creator>Brayden Streeter</dc:creator><description>&lt;div class="paragraph"&gt;

&lt;p&gt;I was unsuccessful regenerating the Nikola website on a Windows 11 box.

I followed the startup guide and installed dependencies.

I ended up with a slightly different version of each tool, but I didn’t think it would be fatal.&lt;/p&gt;

&lt;/div&gt;

&lt;div class="listingblock"&gt;

&lt;div class="content"&gt;

&lt;pre class="highlight"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;PS C:\Users\Brayden\repos\recipes&amp;gt; python --version

Python 3.13.3

[2025-12-20 07:44:45] INFO: Nikola: Did you mean "version"?

PS C:\Users\Brayden\repos\recipes&amp;gt; ..\nikola-env\Scripts\nikola.exe --version

Nikola v8.3.3

PS C:\Users\Brayden\repos\recipes&amp;gt; asciidoctor --version

Asciidoctor 2.0.26 [https://asciidoctor.org]

Runtime Environment (ruby 3.2.2 (2023-03-30 revision e51014f9c0) [x64-mingw-ucrt]) (lc:IBM437 fs:UTF-8 in:UTF-8 ex:UTF-8)&lt;/code&gt;&lt;/pre&gt;

&lt;/div&gt;

&lt;/div&gt;

&lt;div class="paragraph"&gt;

&lt;p&gt;Every attempt to regenerate the site raised the following error before I added any new posts.&lt;/p&gt;

&lt;/div&gt;

&lt;div class="listingblock"&gt;

&lt;div class="content"&gt;

&lt;pre class="highlight"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;..\nikola-env\Scripts\nikola.exe build

Scanning posts......done!

[2025-12-20 07:44:12] ERROR: Nikola: Error loading tasks. An unhandled exception occurred.

[2025-12-20 07:44:12] ERROR: Nikola: doit.exceptions.InvalidTask: Task generation 'render_site' has duplicated definition of 'render_posts:cache\posts\tech\installing-nikola-on-windows.html'

[2025-12-20 07:44:12] WARNING: Nikola: To see more details, run Nikola in debug mode (set environment variable NIKOLA_DEBUG=1) or use NIKOLA_SHOW_TRACEBACKS=1&lt;/code&gt;&lt;/pre&gt;

&lt;/div&gt;

&lt;/div&gt;

&lt;div class="paragraph"&gt;

&lt;p&gt;The &lt;code&gt;./cache&lt;/code&gt; and &lt;code&gt;./output&lt;/code&gt; directories did not contain any generated output.

I only see CSS and images copied over.

Running as an administrator didn’t change anything.

I didn’t see any security actions taken by antivirus.

Googling for Windows specific issues against Nikola did not bring up any obvious fixes.&lt;/p&gt;

&lt;/div&gt;

&lt;div class="paragraph"&gt;

&lt;p&gt;I modified &lt;code&gt;loader.py&lt;/code&gt; in the Nikola source to dump all of the tasks when raising an error.

Nikola :&lt;/p&gt;

&lt;/div&gt;

&lt;div class="listingblock"&gt;

&lt;div class="content"&gt;

&lt;pre class="highlight"&gt;&lt;code class="language-bash" data-lang="bash"&gt;render_pages

redirect

render_listings

copy_files

...

copy_assets

...

render_taxonomies

...

render_sources

...

scale_images

...

render_posts

render_posts:timeline_changes

render_posts:cache\posts\tech\installing-nikola-on-windows.html&lt;/code&gt;&lt;/pre&gt;

&lt;/div&gt;

&lt;/div&gt;

&lt;div class="paragraph"&gt;

&lt;p&gt;I noticed that all of my posts were being rendered as pages &lt;em&gt;and&lt;/em&gt; posts.

I started poking at the post/pages definitions in conf.py. I realized I had duplicate entries for posts:&lt;/p&gt;

&lt;/div&gt;

&lt;div class="listingblock"&gt;

&lt;div class="content"&gt;

&lt;pre class="highlight"&gt;&lt;code class="language-python" data-lang="python"&gt;POSTS = (

    ("posts/*.rst", "posts", "post.tmpl"),

    ("posts/*.adoc", "posts", "post.tmpl"),

    ("posts/tech/*.adoc", "tech", "post.tmpl"),

    ("posts/recipes/*.adoc", "recipes", "post.tmpl"),

)&lt;/code&gt;&lt;/pre&gt;

&lt;/div&gt;

&lt;/div&gt;

&lt;div class="paragraph"&gt;

&lt;p&gt;Removing the &lt;code&gt;tech&lt;/code&gt; and &lt;code&gt;recipes&lt;/code&gt; entries corrected the duplicate entry issue.&lt;/p&gt;

&lt;/div&gt;

&lt;div class="listingblock"&gt;

&lt;div class="content"&gt;

&lt;pre class="highlight"&gt;&lt;code class="language-python" data-lang="python"&gt;POSTS = (

    ("posts/*.rst", "posts", "post.tmpl"),

    ("posts/*.adoc", "posts", "post.tmpl"),

)&lt;/code&gt;&lt;/pre&gt;

&lt;/div&gt;

&lt;/div&gt;

&lt;div class="paragraph"&gt;

&lt;p&gt;I still received file not found errors.

Since previously created posts were failing to compile, I started with checking the compiler paths.

I always forget this, but on Windows Asciidoctor is typically invoked via script.

I tweaked &lt;code&gt;conf.py&lt;/code&gt; to include alternate paths depending on the OS.&lt;/p&gt;

&lt;/div&gt;

&lt;div class="listingblock"&gt;

&lt;div class="content"&gt;

&lt;pre class="highlight"&gt;&lt;code class="language-python" data-lang="python"&gt;import os   # To cover OS specific installs - Asciidoctor



# ...



if os.name == 'nt':

    ASCIIDOC_BINARY = "asciidoctor.bat"

else:

    ASCIIDOC_BINARY = "asciidoctor"&lt;/code&gt;&lt;/pre&gt;

&lt;/div&gt;

&lt;/div&gt;

&lt;div class="paragraph"&gt;

&lt;p&gt;After that, I was able to compile successfully.

I have not had a chance to test this on Linux yet, but I’m confident that this should "just work" across my dev environments moving forward.&lt;/p&gt;

&lt;/div&gt;</description><category>asciidoctor</category><category>nikola</category><category>windows</category><guid>https://bstreete.github.io/posts/tech/installing-nikola-on-windows/</guid><pubDate>Sat, 20 Dec 2025 14:03:31 GMT</pubDate></item></channel></rss>